import './polyfills.server.mjs';
import{B as m,S as d,V as g,r as n,s as h}from"./chunk-DDANN2B7.mjs";import{M as u,Q as s,k as i,u as a}from"./chunk-MBAFEM7P.mjs";var f=class c{constructor(t,r,e){this.http=t;this.router=r;this.authService=e}apiUrl=`${d.apiBaseUrl}/admin`;createProject(t){let r=this.authService.getToken();if(!r)return this.router.navigate(["/"]),i(()=>new Error("No autenticado"));let e=new n({Authorization:`Bearer ${r}`});return this.http.post(`${this.apiUrl}/create_project`,t,{headers:e}).pipe(a(o=>(console.error("Error creating project:",o),i(()=>o))))}deleteProject(t){let r=this.authService.getToken();if(!r)return this.router.navigate(["/"]),i(()=>new Error("No autenticado"));let e=new n({Authorization:`Bearer ${r}`});return this.http.delete(`${this.apiUrl}/delete_project/${t}`,{headers:e}).pipe(a(o=>(console.error("Error creating project:",o),i(()=>o))))}getProjects(){let t=this.authService.getToken(),r=this.authService.getUser();if(!t||!r)return this.router.navigate(["/"]),i(()=>new Error("No autenticado"));try{let e=JSON.parse(r),o=new n({Authorization:`Bearer ${t}`});return this.http.get(`${this.apiUrl}/get_project/${e.id}`,{headers:o}).pipe(a(p=>(console.error("Error fetching projects:",p),i(()=>p))))}catch(e){return console.error("Error parsing user data:",e),i(()=>new Error("Datos de usuario corruptos"))}}getProject(t){let r=this.authService.getToken();if(!r)return this.router.navigate(["/"]),i(()=>new Error("No autenticado"));try{let e=new n({Authorization:`Bearer ${r}`});return this.http.get(`${this.apiUrl}/get_one_project/${t}`,{headers:e}).pipe(a(o=>(console.error("Error fetching projects:",o),i(()=>o))))}catch(e){return console.error("Error parsing user data:",e),i(()=>new Error("Datos de usuario corruptos"))}}updateProject(t,r){let e=this.authService.getToken(),o=new n({Authorization:`Bearer ${e}`});return this.http.put(`${this.apiUrl}/edit_project/${t}`,r,{headers:o})}static \u0275fac=function(r){return new(r||c)(s(h),s(m),s(g))};static \u0275prov=u({token:c,factory:c.\u0275fac,providedIn:"root"})};export{f as a};
