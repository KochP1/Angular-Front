import './polyfills.server.mjs';
import{a as k}from"./chunk-PCZGWC3H.mjs";import{B as S,E as O,e as y,f as I,g as b,h as M}from"./chunk-FRORQDJ3.mjs";import{$a as o,Aa as p,Ga as j,La as m,R as f,W as _,X as v,Za as c,_a as n,ca as d,eb as x,hb as P,ib as l,qb as a,rb as g,sb as u,va as i,wb as h,xb as C}from"./chunk-AKJV5UCE.mjs";import"./chunk-X2SEQXRR.mjs";function N(t,r){t&1&&(n(0,"div",4),a(1," Cargando proyectos... "),o())}function L(t,r){if(t&1&&(n(0,"div",5),a(1),o()),t&2){let e=l();i(),u(" ",e.error()," ")}}function T(t,r){if(t&1){let e=x();n(0,"div",9),P("click",function(){let E=_(e).$implicit,U=l(2);return v(U.onClick(E.id))}),n(1,"h3"),a(2),o(),n(3,"p"),a(4),o(),n(5,"small"),a(6),h(7,"date"),o()()}if(t&2){let e=r.$implicit;i(2),g(e.name),i(2),g(e.description),i(2),u("Creado el: ",C(7,3,e.createdAt))}}function w(t,r){t&1&&(n(0,"div",10),a(1," No tienes proyectos creados a\xFAn. "),o())}function F(t,r){if(t&1&&(n(0,"div",6)(1,"h2"),a(2,"Mis Proyectos"),o(),m(3,T,8,5,"div",7)(4,w,2,0,"div",8),o()),t&2){let e,s=l();i(3),c("ngForOf",s.projects()),i(),c("ngIf",((e=s.projects())==null?null:e.length)===0)}}var D=class t{constructor(r,e){this.projectService=r;this.router=e}userData;projects=d(null);isLoading=d(!1);error=d(null);snackBar=f(O);ngOnInit(){this.loadUser(),this.userData&&this.getProjects(this.userData.id)}loadUser(){let r=localStorage.getItem("user");if(r)try{this.userData=JSON.parse(r)}catch{this.snackBar.open("Error al obtener datos del usuario","X",{duration:3e3}),this.userData=null}}getProjects(r){this.isLoading.set(!0),this.error.set(null),this.projectService.getAssignedProjects(r).subscribe({next:e=>{this.projects.set(e),console.log(this.projects()),this.isLoading.set(!1)},error:e=>{this.error.set("Error al cargar proyectos"),this.isLoading.set(!1),this.snackBar.open(`Error al recuperar proyectos: ${e}`,"X",{duration:3e3})}})}onClick(r){this.router.navigate(["/dashboard/tasks",r])}static \u0275fac=function(e){return new(e||t)(p(k),p(S))};static \u0275cmp=j({type:t,selectors:[["app-user-projects"]],decls:4,vars:3,consts:[[1,"projects-container"],["class","loading-spinner",4,"ngIf"],["class","error-message",4,"ngIf"],["class","project-list__container",4,"ngIf"],[1,"loading-spinner"],[1,"error-message"],[1,"project-list__container"],["class","project-card",3,"click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"project-card",3,"click"],[1,"empty-state"]],template:function(e,s){e&1&&(n(0,"section",0),m(1,N,2,0,"div",1)(2,L,2,1,"div",2)(3,F,5,2,"div",3),o()),e&2&&(i(),c("ngIf",s.isLoading()),i(),c("ngIf",s.error()),i(),c("ngIf",s.projects()&&!s.isLoading()))},dependencies:[M,y,I,b],styles:[".projects-container[_ngcontent-%COMP%]{padding:2rem}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.error-message[_ngcontent-%COMP%]{color:#d32f2f;padding:1rem;background-color:#fde0e0;border-radius:4px}.project-list__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;align-items:center}.project-list__container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.project-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;margin:auto;width:80%}.project-card[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:.5s;cursor:pointer}.error[_ngcontent-%COMP%]{color:red}"]})};export{D as UserProjects};
